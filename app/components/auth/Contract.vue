<template>
    <Page actionBarHidden="true">
        <GridLayout rows="*" columns="*" backgroundColor="#F2CBC2">
            <ScrollView row="0" col="0" width="100%">
                <WrapLayout orientation="horizontal" marginTop="5" id="grid">
                    <FlexboxLayout width="100%" justifyContent="center" alignItems="center">
                        <Label fontSize="25" color="black" marginTop="15" marginBottom="10" text="Contrato" textWrap="true" />
                        
                    </FlexboxLayout>

                    <StackLayout padding="10">
                        <Label text="A los Usuarios (persona física o moral que realizan el acceso mediante equipo de cómputo y/o de comunicación) de la plataforma electrónica se les informa que los siguientes Términos y Condiciones de Uso y Privacidad (en lo subsecuente Términos y Condiciones), les son aplicables por el simple uso o acceso a la página que integra el portal fassst.mx y app.fassst.mx (el 'Portal') y nuestra aplicación Fassst (la “Aplicación”), por lo que entenderemos que los acepta y acuerda en obligarse a su cumplimiento. En el caso de que no esté de acuerdo con los Términos y Condiciones deberá abstenerse de acceder o utilizar el Portal y Aplicación." textWrap="true" />
                        <Label marginTop="5" textWrap="true" text="De igual forma, nos reservamos el derecho de modificar discrecionalmente el contenido del Portal, la Aplicación y nuestras Condiciones de servicio en cualquier momento, sin necesidad de previo aviso. Tenga en cuenta que su uso continuado de los Servicios después de cualquier cambio significa que está de acuerdo con las nuevas Condiciones de servicio y acepta estar sujeto a ellas. Si no está de acuerdo con algún cambio en los Términos de servicio y no desea estar sujeto a los términos revisados, deberá cerrar su cuenta y / o dejar de usar los Servicios." />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="1. USO DE LOS SERVICIOS">
                        </Label>
                        <Label text="Por el simple acceso o utilización del Portal y de la Aplicación expresan la adhesión plena y sin reservas del Usuario a los presentes Términos y Condiciones. A través del Portal https://www.app.fassst.mx o de Google Play, el Usuario se servirá y/o utilizará diversos servicios y contenidos (en lo sucesivo, los 'Servicios y Contenidos'), puestos a disposición del Usuario por Fassst y/o sus subsidiarias, controladoras, partes relacionadas y afiliadas y/o por terceros proveedores de Servicios y Contenidos. Fassst tendrá el derecho de negar, restringir o condicionar al Usuario el acceso al Portal o Aplicación, total o parcialmente, a su entera discreción, así como de modificar los Servicios y Contenidos del Portal o Aplicación en cualquier momento y sin necesidad de previo aviso." textWrap="true" />
                        <Label text="El Usuario reconoce que no todos los Servicios y Contenidos están disponibles en todas las áreas geográficas y que algunos Servicios y Contenidos pueden ser utilizados solamente con posterioridad a su activación o registro previo por el Usuario y/o mediante el pago de una comisión, según se indique en las presentes términos y Condiciones." textWrap="true" />
                        <Label text="Fassst no garantiza la disponibilidad y continuidad de la operación del Portal o Aplicación y de los Servicios y Contenidos, ni la utilidad del Portal o Aplicación o los Servicios y Contenidos en relación con cualquier actividad específica, independientemente del medio de acceso que utilice el Usuario, incluido la telefonía móvil. Fassst no será responsable por daño o pérdida alguna de cualquier naturaleza que pueda ser causado debido a la falta de disponibilidad o continuidad de operación del Portal o Aplicación y/o de los Servicios y Contenidos." textWrap="true" />

                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="1.1 UTILIZACIÓN DEL PORTAL Y APLICACIÓN">
                        </Label>
                        <Label text="--" textWrap="true" />
                        
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="1.2 RELACIÓN CON LOS USUARIOS">
                        </Label>
                        <Label text="Los Servicios y Contenidos que presta Fassst a los Usuarios a través del Portal y la Aplicación se considerarán siempre una relación entre proveedor y consumidor, por lo que en ningún momento representarán un nexo o relación obrero-patronal, por tanto no sostendrán, ni en el presente ni en el futuro, una relación laboral en ninguna de la formas o modalidades que establece la legislación laboral vigente, para con ninguno de los Usuarios por parte de Fassst, ya que entendemos que al utilizar los servicios y contenidos los acepta y acuerda sujetarse a ellos desde el momento en que hace utilización de los mismos. Por lo anterior, Fassst no será responsable de cualquier accidente en el ejercicio de su trabajo." textWrap="true" />
                        <Label marginTop="5" text="En caso de existir una controversia, disputa o contienda de cualquier tipo o entre sí de algún usuario de nuestra plataforma o aplicación, sea promotor o proveedor, usted libera a Fassst de formar parte de dicha contienda o de cualquier responsabilidad sea de índole laboral, administrativa, penal, civil o fiscal, por lo que no tendrá para con Fassst ninguna acción o derecho que ejercitar o hacer valer en ningún tiempo." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="2. PROPIEDAD INTELECTUAL">
                        </Label>
                        <Label text="Los derechos de propiedad intelectual respecto de los Servicios y Contenidos, las marcas, los signos distintivos y dominios de las Páginas o el Portal y Aplicación, así como los derechos de uso y explotación de los mismos, incluyendo su divulgación, publicación, reproducción, distribución y transformación, son propiedad exclusiva de Fassst. El Usuario no adquiere ningún derecho de propiedad intelectual por el simple uso de los Servicios y Contenidos del Portal o Aplicación y en ningún momento dicho uso será considerado como una autorización o licencia para utilizar los Servicios y Contenidos con fines distintos a los que se contemplan en los presentes Términos y Condiciones y a los contratos respectivos." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="3. USOS PERMITIDOS">
                        </Label>
                        <Label text="El aprovechamiento de los Servicios y Contenidos del Portal es exclusiva responsabilidad del Usuario, quien en todo caso deberá servirse de ellos acorde a las funcionalidades permitidas en el propio Portal o Aplicación y a los usos autorizados en los presentes Términos y Condiciones, por lo que el Usuario se obliga a utilizarlos de modo tal que no atenten contra las normas de uso y convivencia en internet, las leyes de los Estados Unidos Mexicanos y la legislación vigente en el país en que el Usuario se encuentre al usarlos, las buenas costumbres, la dignidad de la persona y los derechos de terceros. El Portal y la Aplicación es para el uso individual del Usuario por lo que no podrá comercializar de manera alguna los Servicios y Contenidos." textWrap="true" />
                        <Label marginTop="5" text="Por ello, el usuario, es el único responsable de obtener y suministrar el acceso a la red de datos necesario para utilizar los servicios, por ende, Fassst no será responsable del pago de los servicios de datos que provean las empresas dedicadas a ello, ni tampoco al incremento de dichos costos o tarifas." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="4. RESTRICCIONES">
                        </Label>
                        <Label text="El Usuario conviene en no utilizar dispositivos, software, o cualquier otro medio tendiente a interferir tanto en las actividades y/o operaciones del Portal o en las bases de datos y/o información que se contenga en el mismo, tampoco podrá colocar híper ligas al Portal, ni colocar o utilizar los Servicios y Contenidos de la Página en sitios o páginas propias o de terceros sin autorización previa y por escrito del Fassst. Asimismo, el Usuario no tendrá el derecho de limitar o impedir a cualquier otro Usuario el uso del Portal, con respecto al uso de la Aplicación y los servicios, estará prohibido:" textWrap="true" />
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="1.- " />
                                <Span text="Suplantar a cualquier persona o entidad." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="2.- " />
                                <Span text="Acechar, amenazar, acosar a cualquier persona a través del mismo." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="3.- " />
                                <Span text="Violar cualquier ley, estatuto, ordenanza o reglamento." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="4.- " />
                                <Span text="Transferir o vender su cuenta de usuario, contraseña o identificación a alguna otra parte." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="5.- " />
                                <Span text="Alquilar, arrendar, prestar, vender, redistribuir, licenciar o sublicenciar la plataforma de Fassst o acceso a cualquier parte de la plataforma de Fassst." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="6.- " />
                                <Span text="Modificar, adaptar, traducir, aplicar ingeniería inversa, descifrar, descompilar o desensamblar de otra manera cualquier parte de la plataforma de Fassst y cualquier software usado en o para la plataforma de Fassst." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="7.- " />
                                <Span text="Publicar o enviar a través de correo electrónico o cualquier otra forma de transmitir cualquier código malicioso, archivos o programas diseñados para interrumpir, dañar, destruir o limitar la funcionalidad de cualquier equipo informático de software o de hardware o de telecomunicaciones o subrepticiamente, interceptar o expropiar cualquier sistema, datos o información personal." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="8.- " />
                                <Span text="Utilizar la plataforma de Fassst de alguna manera que infrinja los derechos de cualquier tercero, incluyendo derechos de propiedad intelectual, copyright, patente, marca registrada, secreto comercial u otros derechos de propiedad o derechos de publicidad o privacidad." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="9.- " />
                                <Span text="Publicar información o interactuar en la plataforma de Fassst o servicios de una manera que es falsa, inexacta, engañosa (directamente o por omisión o falta de actualización de información), difamatorio, calumnioso, abusivo, obsceno, profano, ofensivo, sexualmente orientado, amenazador, acosador, o ilegales." />
                            </FormattedString>
                        </Label>
                        <Label textWrap="true">
                            <FormattedString>
                                <Span fontWeight="bold" text="10.- " />
                                <Span text="Interferir con o interrumpir los servicios o la plataforma de Fassst o los servidores o redes conectadas a la plataforma de Fassst." />
                            </FormattedString>
                        </Label>

                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="5. CALIDAD DE LOS SERVICIOS Y CONTENIDOS">
                        </Label>
                        <Label text="Fassst o socios comerciales NO serán responsables de cualquier daño o perjuicio que sufra el Usuario a consecuencia de imprecisiones en los contenidos, errores tipográficos y cambios o mejoras que se realicen a los Servicios y Contenidos del portal. Las recomendaciones y consejos obtenidos a través del Portal son de naturaleza general, por lo que no deben tomarse en cuenta para la adopción de decisiones personales ni profesionales. Se debe consultar a un profesional apropiado que pueda asesorar al Usuario de acuerdo con sus necesidades específicas." textWrap="true" />
                        <Label marginTop="5" text="Por ello usted está de acuerdo en no responsabilizar de ninguna manera a Fassst, por situaciones que se deriven del uso debido o indebido de los servicios obtenidos a través de la plataforma o aplicación, la modificación de los presentes Términos y Condiciones, la utilización indebida de los datos de cualquier usuario." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="6. CONFIDENCIALIDAD">
                        </Label>
                        <Label text="Fassst se obliga a mantener confidencial la información que reciba del Usuario que tenga dicho carácter conforme a las disposiciones legales aplicables, en los Estados Unidos Mexicanos. Fassst no asume ninguna obligación de mantener confidencial sobre cualquier otra información que el Usuario le proporcione, ya sea al inscribirse al Portal o Aplicación en cualquier otro momento posterior, incluyendo aquella información que el Usuario proporcione a través de boletines, pizarras o plática en línea (chats); así como, la información que obtenga Fassst a través de las Cookies." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="6. CONFIDENCIALIDAD">
                        </Label>
                        <Label text="Fassst se obliga a mantener confidencial la información que reciba del Usuario que tenga dicho carácter conforme a las disposiciones legales aplicables, en los Estados Unidos Mexicanos. Fassst no asume ninguna obligación de mantener confidencial sobre cualquier otra información que el Usuario le proporcione, ya sea al inscribirse al Portal o Aplicación en cualquier otro momento posterior, incluyendo aquella información que el Usuario proporcione a través de boletines, pizarras o plática en línea (chats); así como, la información que obtenga Fassst a través de las Cookies." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="7. USO DE LA INFORMACIÓN NO CONFIDENCIAL O INDIVIDUAL">
                        </Label>
                        <Label text="Mediante el uso del Portal o Aplicación, el Usuario autoriza a Fassst a utilizar, publicar, reproducir, divulgar, comunicar públicamente y transmitir la información no privada, no confidencial, no individual, en términos de lo establecido en el artículo 109 de la Ley Federal de Derechos de Autor y de la fracción I, del artículo 76 bis de la Ley Federal de Protección al Consumidor." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="8. COOKIES">
                        </Label>
                        <Label text="El Usuario que tenga acceso a la Página, conviene en recibir archivos que les transmitan los servidores del Fassst. 'Cookie' significa un archivo de datos que se almacena en el disco duro de la computadora del Usuario cuando éste tiene acceso a la Página. Dichos archivos pueden contener información tal como la identificación proporcionada por el Usuario o información para rastrear las páginas que el Usuario ha visitado. Una Cookie no puede leer los datos o información del disco duro del Usuario ni leer las Cookies creadas por otros sitios o páginas." textWrap="true" />
                        
                        <Label 
                            marginTop="10"
                            textColor="black"
                            fontWeight="bold"
                            textSize="15"
                            textWrap="true"
                            textAlignment="true"
                            text="9. CLAVES DE ACCESO">
                        </Label>
                        <Label text="En todo momento, el Usuario es el responsable único y final de mantener en secreto su clave de acceso a la aplicación, y a los Servicios y Contenidos del Portal; así como a las páginas de terceros." textWrap="true" />

                    </StackLayout>
                    
                    <DrawingPad
                        ref="DrawingPad"
                        height="400"
                        id="drawingPad"
                        penColor="#000000"
                        penWidth="3"
                        >
                    </DrawingPad>

                    <FlexboxLayout width="100%" marginTop="10" marginBottom="10" justifyContent="center" alignItems="center" flexDirection="column">
                        <Button width="90%" fontSize="16" height="40" backgroundColor="#F24464" borderRadius="10" text="Borrar firma" color="white" @tap="clearMyDrawing" />
                    </FlexboxLayout>

                    <GridLayout rows="*" columns="2*, *">
                        <StackLayout row="0" col="0">
                            <FlexboxLayout width="90%" marginTop="10" marginBottom="10" justifyContent="center" alignItems="center" flexDirection="column">
                                <Button width="90%" fontSize="16" height="40" backgroundColor="#F24464" color="white" borderRadius="10" text="Continuar" @tap="signDraw" />
                            </FlexboxLayout>
                        </StackLayout>
                        <StackLayout row="0" col="1">
                            <FlexboxLayout width="100%" marginTop="10" marginBottom="10" justifyContent="center" alignItems="center" flexDirection="column">
                                <Button width="90%" fontSize="16" height="40" backgroundColor="black" borderRadius="10" text="Salir" color="white" @tap="singOut" />
                            </FlexboxLayout>
                        </StackLayout>
                    </GridLayout>

                    <!-- <FlexboxLayout width="100%" marginTop="10" marginBottom="10" justifyContent="center" alignItems="center" flexDirection="column">
                        <Button width="90%" fontSize="16" height="40" backgroundColor="#F24464" borderRadius="10" text="Continuar" color="white" @tap="signDraw" />
                    </FlexboxLayout> -->
                    
                </WrapLayout>
            </ScrollView>
        </GridLayout>
    </Page>
</template>

<script>
//Firebase
const firebase = require("nativescript-plugin-firebase")

//Vuex
import { mapState } from 'vuex'

//Vuelidate
import { required, maxLength } from 'vuelidate/lib/validators'

//Toast
import * as Toast from 'nativescript-toast'

//Moment
const moment = require('moment')

import { Image } from "ui/image";
import { ImageSource } from "image-source";

const fileSystemModule = require("tns-core-modules/file-system");

//LOADER
const LoadingIndicator = require('@nstudio/nativescript-loading-indicator').LoadingIndicator
const Mode = require('@nstudio/nativescript-loading-indicator').Mode
const loader = new LoadingIndicator()

let message1 = 'Cargando...'
let message2 = 'Creando registro'

const options = {
    message: message1,
    details: message2,
    progress: 0.65,
    margin: 10,
    dimBackground: true,
    color: '#2988D2', // color of indicator and labels
    // background box around indicator
    // hideBezel will override this if true
    backgroundColor: 'white',
    userInteractionEnabled: false, // default true. Set false so that the touches will fall through it.
    hideBezel: true, // default false, can hide the surrounding bezel
    mode: Mode.Indeterminate, // see options below
    // android: {
    //     view: android.view.View, // Target view to show on top of (Defaults to entire window)
    //     cancelable: true,
    //     cancelListener: function(dialog) {
    //         console.log('Loading cancelled');
    //     }
    // },
    // ios: {
    //     view: UIView // Target view to show on top of (Defaults to entire window)
    // }
};

export default {
    props: ['type'],

    data(){
        return{
            uid: '',
            isChecked: false,
            terms: `Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas suscipit ipsum nec enim mollis scelerisque. Praesent gravida augue ut tristique tincidunt. Nam augue diam, tincidunt non eros eget, ultricies eleifend nunc. Vivamus molestie lectus sed quam tempor, at sagittis odio venenatis. Nunc aliquet ipsum at porta fringilla. Proin justo purus, venenatis sed odio quis, elementum faucibus nunc. Nam auctor orci vitae leo dapibus consectetur. Cras ligula purus, convallis vitae mauris eu, lacinia convallis quam. Maecenas nec ipsum sagittis, hendrerit velit sit amet, tempor diam. Pellentesque hendrerit eget sem sit amet convallis. Sed luctus nulla nisl, in viverra ex rutrum id. Donec vel libero nulla. In lorem nulla, sagittis ut urna a, tincidunt placerat dolor. Maecenas porttitor et massa id rhoncus. Vestibulum aliquam, odio in ullamcorper venenatis, lacus lectus dignissim dolor, id maximus mauris nulla at enim. Mauris dui augue, porta et scelerisque ac, iaculis sit amet risus.

Donec ac ex quis augue sollicitudin cursus. Curabitur quis nisi vel odio porttitor elementum. Nullam laoreet at erat non venenatis. Curabitur a purus pretium, tincidunt urna id, accumsan dui. Phasellus lectus felis, pharetra eu elementum id, sagittis ac turpis. Proin molestie est dui, consequat aliquet odio iaculis non. Sed in bibendum ipsum. Nam a sodales leo. Praesent vel euismod nulla, sed consequat mi. Integer ac vestibulum odio. Pellentesque tristique urna id urna ornare, ac ultrices ligula porttitor. Cras eu diam ut ipsum facilisis aliquam. Maecenas turpis elit, viverra in suscipit at, mollis id arcu. Quisque in elit mi.

Vestibulum sed justo dictum, scelerisque quam id, vestibulum lorem. In elementum magna eget mi auctor laoreet. Morbi quam nibh, euismod et tempor eget, maximus eu elit. Fusce commodo faucibus elit, at sodales nunc tincidunt eu. Proin fermentum dapibus orci, ut feugiat ipsum. Aenean tempor libero mauris, eget sodales ante sagittis eu. Nullam ultrices rutrum lacus vel faucibus. Cras ut maximus leo. Quisque a felis condimentum, convallis ex vitae, luctus metus. Fusce quis dignissim velit. Aliquam consequat neque a quam dictum, et mollis massa rutrum.

Nam a felis urna. Vestibulum aliquet dolor egestas, accumsan tellus ut, convallis ex. Aliquam a semper justo, venenatis ornare est. Integer in libero et enim suscipit luctus quis id est. Proin non erat consequat, viverra lectus consectetur, tincidunt dui. Praesent facilisis egestas arcu nec eleifend. Praesent et nibh aliquam, viverra lacus vel, mattis odio. Cras ultricies, orci vitae scelerisque dapibus, eros lectus laoreet lacus, ac aliquet lectus quam ac ex. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam finibus sollicitudin ultrices. Etiam viverra nunc blandit augue iaculis, ut commodo erat sodales. Maecenas leo nisl, egestas a purus vel, imperdiet auctor odio. Vivamus vel consectetur ex. Nulla cursus porta arcu, vitae sodales tellus.

Suspendisse potenti. Fusce sed maximus libero, at cursus ex. Morbi vitae dolor eleifend, viverra mauris vitae, blandit leo. Mauris egestas purus vitae consectetur sagittis. Nulla lacinia augue at nibh tristique facilisis sed at dolor. Nulla molestie felis vitae mauris fermentum, a aliquam urna eleifend. Aliquam id risus dolor. Maecenas posuere tellus ut urna feugiat dapibus. Suspendisse sollicitudin nulla quis justo tempus tempor. Nunc ac mi et arcu suscipit elementum id viverra metus.


            `,

            pathImage: '',
        }
    },

    filters: {
        formatDate(date){
            moment.locale('es')
            
            return moment(date).format('LT')
        }
    },

    computed: {
        ...mapState([
            'user'
        ])
    },

    methods: {
        clearMyDrawing(args){
            let pad = this.$refs.DrawingPad.nativeView
            pad.clearDrawing();
        },

        async signDraw(){
            // get reference to the drawing pad
            const pad = this.$refs.DrawingPad.nativeView

            // then get the drawing (Bitmap on Android) of the drawingpad
            pad.getDrawing().then(
                data => {
                    console.log(data);

                    confirm({
                        title: "¿Has terminado?",
                        message: "Aceptas que has leído el contrato y estas de acuerdo.",
                        okButtonText: "Aceptar",
                        cancelButtonText: "Cancelar"
                    }).then(async result => {
                        if (result) {
                            this.sign = data;

                            var img2 = new ImageSource(data)

                            var folder = fileSystemModule.knownFolders.documents();
                            var path = fileSystemModule.path.join(folder.path, "sing.png");
                            var saved = img2.saveToFile(path, "png");
                            console.log("saved: " + saved);
                            console.log("IMAGEN SRC.....", path);
                            this.pathImage = path
                            // return
                            
                            this.uid = this.user.uid

                            loader.show(options)

                            this.savePhotos(this.pathImage)
                        }
                    }); 
                    
                },
                err => {
                    console.log(err);
                    alert({
                        name: "Falta una firma",
                        message: "Debes firmar el contrato para continuar.",
                        okButtonText: "Entendido"
                    }).then(() => {
                        console.log("Alert dialog closed")
                    });
                }
            );
            
        },

        //Generar UUID
        generateUUID(){
            var h = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
            var k = ['x','x','x','x','x','x','x','x','-','x','x','x','x','-','4','x','x','x','-','y','x','x','x','-','x','x','x','x','x','x','x','x','x','x','x','x'];
            var u = '',i=0,rb=Math.random()*0xffffffff|0;
            while(i++<36) {
                var c=k[i-1],r=rb&0xf,v=c=='x'?r:(r&0x3|0x8);
                u+=(c=='-'||c=='4')?c:h[v];rb=i%8==0?Math.random()*0xffffffff|0:rb>>4
            }
            return u
        },

        //Guardar las fotos
        async savePhotos(args){
            console.log('Save photos');
            if(args == ''){
                alert({
                    name: "Falta una firma",
                    message: "Debes firmar el contrato para continuar.",
                    okButtonText: "Entendido"
                }).then(() => {
                    console.log("Alert dialog closed")
                });

                return
            }

            try{
                let metadata = {
                    contentType: "image/jpeg",
                    contentLanguage: "es",
                }

                let fotoId = this.generateUUID()
                firebase.storage.uploadFile({
                remoteFullPath: 'signs/' + fotoId + '.jpg',
                localFullPath: args,
                onProgress: (status) => {
                    console.log("Uploaded fraction: " + status.fractionCompleted);
                    console.log("Percentage complete: " + status.percentageCompleted);
                },
                metadata
              }).then((uploadedFile) => {
                    let arrayPhotos = []

                    firebase.storage.getDownloadUrl({
                        remoteFullPath: 'signs/' + fotoId + '.jpg'
                    }).then(async (url) => {

                        let data = {
                            photo: url,
                            user: this.uid
                        }

                        arrayPhotos.push(url)

                        let response = await firebase.firestore.collection('sign_photos').add(data)
                        this.goToHome()
                    }).catch(error => {
                        console.log(error);
                        loader.hide()
                    })
                    
                },
                    (error) => {
                        loader.hide()
                        console.log("File upload error: " + error);
                    }
                );
            }
            catch(e){
                loader.hide()
                console.log(e)
            }
        },

        getResizePath(args){
            console.log('Entra a getResizePath')
            setTimeout(() => {
                console.log('Termina el setTimeOut')
                let arrayPhotos = []
                let photoID = `${args}_600x600`

                firebase.storage.getDownloadUrl({
                    remoteFullPath: 'signs/' + photoID + '.jpg'
                }).then(async (url) => {

                        let data = {
                            photo: url,
                            user: this.uid
                        }

                        arrayPhotos.push(url)

                        let response = await firebase.firestore.collection('sign_photos').add(data)
                        this.goToHome()
                    },
                    (error) => {
                        loader.hide()
                        console.log("Error 2: " + error);
                    }
                );
   
            }, 8000);
 
        },

        async goToHome(){
            try {
                loader.hide()
                let response = await firebase.firestore.collection('users')
                                            .doc(this.user.uid)
                                            .update({ contract: true })

                this.$navigator.navigate('/home', { clearHistory: true })
            } catch (error) {
                console.log(error)
            }
        },

        singOut(){
            this.$emit('closeModal')
            firebase.logout()
            this.$navigator.navigate('/login', { clearHistory: true })
        }
    }
}
</script>